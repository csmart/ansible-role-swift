---
all:
  hosts:
    localhost:
      ansible_connection: local
  vars:
    swift_account_port: 6202
    swift_container_port: 6201
    swift_object_port: 6200
    swift_account_rings:
      account:
        part_power: 10
        replicas: 3
        min_part_hours: 0
        path: /home/csmart/code/ansible-role-swift/library/test

    swift_container_rings:
      container:
        part_power: 10
        replicas: 3
        min_part_hours: 0
        path: /home/csmart/code/ansible-role-swift/library/test

    swift_object_rings:
      object:
        part_power: 17
        replicas: 3
        min_part_hours: 0
        default: true
        deprecated: false
        backup: false
        aliases:
          - replicas-3
          - gold
        policy_name: bob
        policy_type: replication
        diskfile_module: egg:swift#replication.fs
        path: /home/csmart/code/ansible-role-swift/library/test
      object-1:
        part_power: 17
        replicas: 7
        min_part_hours: 0
        backup: false
        create: true
        aliases:
          - ec-43
          - silver
        policy_type: erasure_coding
        ec_type: liberasurecode_rs_vand
        ec_num_data_fragments: 4
        ec_num_parity_fragments: 3
        ec_object_segment_size: 1048576
        ec_duplication_factor: 1
        diskfile_module: egg:swift#erasure_coding.fs
        path: /home/csmart/code/ansible-role-swift/library/test

    ## New data structure with dict of dicts
    swift_devices:
      0:
        disk: /dev/nvme0n1
        ip: 127.0.0.1
        meta: top level meta
        rings:
          account:
            meta: ring level meta
            port: "{{ swift_account_port }}"
            region: 10
            weight: 100
            zone: 10
          container:
            port: "{{ swift_container_port }}"
            region: 20
            weight: 100
            zone: 20
      1:
        disk: /dev/nvme0n1
        region: 1
        zone: 2
        port: 8080
        ip: 127.0.0.2
        meta: meta
        rings:
          account:
            port: "{{ swift_account_port }}"
            weight: 100
          container:
            port: "{{ swift_container_port }}"
            weight: 100
      2:
        disk: /dev/nvme0n1
        region: 1
        zone: 1
        port: 8080
        ip: 127.0.0.3
        meta: meta
        rings:
          account:
            port: "{{ swift_account_port }}"
            weight: 100
          container:
            port: "{{ swift_container_port }}"
            weight: 100
      3:
        disk: /dev/sdb
        region: 1
        zone: 1
        ip: 127.0.0.1
        port: 8080
        meta: meta
        rings:
          object:
            port: "{{ swift_object_port }}"
            weight: 100
          object-1:
            port: "{{ swift_object_port }}"
            weight: 100
      4:
        disk: /dev/sdb
        region: 1
        zone: 1
        port: 8080
        ip: 127.0.0.2
        meta: meta
        rings:
          object:
            port: "{{ swift_object_port }}"
            weight: 100
          object-1:
            port: "{{ swift_object_port }}"
            weight: 100
      5:
        disk: /dev/sdb
        region: 1
        zone: 1
        port: 8080
        ip: 127.0.0.3
        meta: meta
        rings:
          object:
            port: "{{ swift_object_port }}"
            weight: 100
          object-1:
            port: "{{ swift_object_port }}"
            weight: 100
      6:
        disk: /dev/sdc
        region: 1
        zone: 1
        ip: 127.0.0.1
        port: 8080
        meta: meta
        rings:
          object:
            port: "{{ swift_object_port }}"
            weight: 100
          object-1:
            port: "{{ swift_object_port }}"
            weight: 100
      7:
        disk: /dev/sdc
        region: 1
        zone: 1
        port: 8080
        ip: 127.0.0.2
        meta: meta
        rings:
          object:
            port: "{{ swift_object_port }}"
            weight: 100
          object-1:
            port: "{{ swift_object_port }}"
            weight: 100
      8:
        disk: /dev/sdc
        region: 1
        zone: 1
        port: 8080
        ip: 127.0.0.3
        meta: meta
        rings:
          object:
            port: "{{ swift_object_port }}"
            weight: 100
          object-1:
            port: "{{ swift_object_port }}"
            weight: 100
      9:
        disk: /dev/sdd
        region: 1
        zone: 1
        ip: 127.0.0.1
        port: 8080
        meta: meta
        rings:
          object:
            port: "{{ swift_object_port }}"
            weight: 100
          object-1:
            port: "{{ swift_object_port }}"
            weight: 100
      10:
        disk: /dev/sdd
        region: 1
        zone: 1
        port: 8080
        ip: 127.0.0.2
        meta: meta
        rings:
          object:
            port: "{{ swift_object_port }}"
            weight: 100
          object-1:
            port: "{{ swift_object_port }}"
            weight: 100
      11:
        disk: /dev/sdd
        region: 1
        zone: 1
        port: 8080
        ip: 127.0.0.3
        meta: meta
        rings:
          object:
            port: "{{ swift_object_port }}"
            weight: 100
          object-1:
            port: "{{ swift_object_port }}"
            weight: 100
